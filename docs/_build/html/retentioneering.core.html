

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>retentioneering.core package &mdash; Retentioneering 2.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Compare groups" href="compare.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/rete_logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <p class="caption"><span class="caption-text">TUTORIAL:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="what_is_rete.html">What is Retentioneering?</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release notes</a></li>
</ul>
<p class="caption"><span class="caption-text">TOOLS DESCRIPTION:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="plot_graph.html">Visualize users behavior</a></li>
<li class="toctree-l1"><a class="reference internal" href="step_matrix.html">Users flow and step matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="transition_matrix.html">Explore users behavior with transition matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="funnel.html">Funnel analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">Behavioral segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="compare.html">Compare segments and AB tests</a></li>
</ul>
<p class="caption"><span class="caption-text">API REFERENCE:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Core functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-retentioneering.core.core_functions.step_matrix">step_matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-retentioneering.core.core_functions.plot_graph">plot_graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-retentioneering.core.core_functions.get_clusters">get_clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-retentioneering.core.core_functions.project">project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-retentioneering.core.core_functions.extract_features">extract_features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-retentioneering.core.core_functions.compare">compare</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-retentioneering.core.core_functions.funnel">funnel</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-retentioneering.core.core_functions.get_edgelist">get_edgelist</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-retentioneering.core.core_functions.get_adjacency">get_adjacency</a></li>
</ul>
</li>
</ul>

            
          
    <a href="https://github.com/retentioneering/retentioneering-tools">GitHub link</a>

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Retentioneering</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>retentioneering.core package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/retentioneering.core.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="retentioneering-core-package">
<h1>retentioneering.core package<a class="headerlink" href="#retentioneering-core-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-retentioneering.core.core_functions.step_matrix">
<span id="step-matrix"></span><h2>step_matrix<a class="headerlink" href="#module-retentioneering.core.core_functions.step_matrix" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="retentioneering.core.core_functions.step_matrix.step_matrix">
<code class="sig-prename descclassname">retentioneering.core.core_functions.step_matrix.</code><code class="sig-name descname">step_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">max_steps</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">weight_col</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">precision</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">targets</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">accumulated</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sorting</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">thresh</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">centered</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">groups</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">show_plot</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/retentioneering/core/core_functions/step_matrix.html#step_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#retentioneering.core.core_functions.step_matrix.step_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots heatmap with distribution of users over trajectory steps ordered by
event name. Matrix rows are event names, columns are aligned user trajectory
step numbers and the values are shares of users. A given entry X at column i
and event j means at i’th step fraction of users X  have specific event j.</p>
<dl>
<dt>max_steps: int (optional, default 20)</dt><dd><p>Maximum number of steps in trajectory to include.</p>
</dd>
<dt>weight_col: str (optional, default None)</dt><dd><p>Aggregation column for edge weighting. If None, specified index_col
from retentioneering.config will be used as column name. For example,
can be specified as <cite>session_id</cite> if dataframe has such column.</p>
</dd>
<dt>precision: int (optional, default 2)</dt><dd><p>Number of decimal digits after 0 to show as fractions in the heatmap.</p>
</dd>
<dt>thresh: float (optional, default 0)</dt><dd><p>Used to remove rare events. Aggregates all rows where all values are
less then specified threshold.</p>
</dd>
<dt>targets: list (optional, default None)</dt><dd><p>List of events names (as str) to include in the bottom of
step_matrix as individual rows. Each specified target will have
separate color-coding space for clear visualization. Example:
[‘product_page’, ‘cart’, ‘payment’]. If multiple targets need to
be compared and plotted using same color-coding scale, such targets
must be combined in sub-list.
Examples: [‘product_page’, [‘cart’, ‘payment’]]</p>
</dd>
<dt>accumulated: string (optional, default None)</dt><dd><p>Option to include accumulated values for targets. Valid values are
None (do not show accumulated tartes), ‘both’ (show step values and
accumulated values), ‘only’ (show targets only as accumulated).</p>
</dd>
<dt>centered: dict (optional, default None)</dt><dd><p>Parameter used to align user trajectories at specific event at specific
step. Has to contain three keys:</p>
<blockquote>
<div><p>‘event’: str, name of event to align
‘left_gap’: int, number of events to include before specified event
‘occurrence’: int which occurance of event to align (typical 1)</p>
</div></blockquote>
<p>When this parameter is not None only users which have specified i’th
‘occurance’ of selected event preset in their trajectories will
be included. Fraction of such remaining users is specified in the title of
centered step_matrix. Example:
{‘event’: ‘cart’, ‘left_gap’: 8, ‘occurrence’: 1}</p>
</dd>
<dt>sorting: list (optional, default None)</dt><dd><p>List of events_names (as string) can be passed to plot step_matrix with
specified ordering of events. If None rows will be ordered according
to i`th value (first row, where 1st element is max, second row, where
second element is max, etc)</p>
</dd>
<dt>groups: tuple (optional, default None)</dt><dd><p>Can be specified to plot step differential step_matrix. Must contain
tuple of two elements (g_1, g_2): where g_1 and g_2 are collections
of user_id`s (list, tuple or set). Two separate step_matrixes M1 and M2
will be calculated for users from g_1 and g_2, respectively. Resulting
matrix will be the matrix M = M1-M2. Note, that values in each column
in differential step matrix will sum up to 0 (since columns in both M1
and M2 always sum up to 1).</p>
</dd>
<dt>show_plot: bool (optional, default True)</dt><dd><p>whether to show resulting heatmap or not.</p>
</dd>
</dl>
<p>Dataframe with max_steps number of columns and len(event_col.unique)
number of rows at max, or less if used thr &gt; 0.</p>
<p>pd.DataFrame</p>
</dd></dl>

</div>
<div class="section" id="module-retentioneering.core.core_functions.plot_graph">
<span id="plot-graph"></span><h2>plot_graph<a class="headerlink" href="#module-retentioneering.core.core_functions.plot_graph" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="retentioneering.core.core_functions.plot_graph.plot_graph">
<code class="sig-prename descclassname">retentioneering.core.core_functions.plot_graph.</code><code class="sig-name descname">plot_graph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">targets</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">weight_col</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">norm_type</span><span class="o">=</span><span class="default_value">'full'</span></em>, <em class="sig-param"><span class="n">layout_dump</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">800</span></em>, <em class="sig-param"><span class="n">height</span><span class="o">=</span><span class="default_value">500</span></em>, <em class="sig-param"><span class="n">thresh</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/retentioneering/core/core_functions/plot_graph.html#plot_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#retentioneering.core.core_functions.plot_graph.plot_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Create interactive graph visualization. Each node is a unique event_col
value, edges are transitions between events and edge weights are calculated
metrics. By default, it is a percentage of unique users that have passed
though a particular edge visualized with the edge thickness. Node sizes are
Graph loop is a transition to the same node, which may happen if users
encountered multiple errors or made any action at least twice. Graph nodes
are movable on canvas which helps to visualize user trajectories but is also
a cumbersome process to place all the nodes so it forms a story.</p>
<p>That is why IFrame object also has a download button. By pressing it, a JSON
configuration file with all the node parameters is downloaded. It contains
node names, their positions, relative sizes and types. It it used as
layout_dump parameter for layout configuration. Finally, show weights
toggle shows and hides edge weights.</p>
<dl>
<dt>norm_type: str (optional, default ‘full’)</dt><dd><p>Type of normalization used to calculate weights for graph edges. Possible
values are:</p>
<blockquote>
<div><ul class="simple">
<li><p>None</p></li>
<li><p>‘full’</p></li>
<li><p>‘node’</p></li>
</ul>
</div></blockquote>
</dd>
<dt>weight_col: str (optional, default None)</dt><dd><p>Aggregation column for edge weighting. If None, number of events will be
calculated. For example, can be specified as <cite>client_id</cite> or <cite>session_id</cite>
if dataframe has such columns.</p>
</dd>
<dt>targets: dict (optional, default None)</dt><dd><p>Event mapping describing which nodes or edges should be highlighted by
different colors for better visualisation. Dictionary keys are event_col
values, while keys have the following possible values:
Example: {‘lost’: ‘red’, ‘purchased’: ‘green’, ‘main’: ‘source’}</p>
</dd>
<dt>thresh: float (optional, default 0.01)</dt><dd><p>Minimal edge weight value to be rendered on a graph. If a node has no
edges of the weight &gt;= thresh, then it is not shown on a graph. It
is used to filter out rare event and not to clutter visualization. Nodes
specified in targets parameter will be always shown regardless selected
threshold.</p>
</dd>
<dt>layout_dump: str (optional, default None)</dt><dd><p>Path to layout configuration file relative to current directory. If
defined, uses configuration file as a graph layout.</p>
</dd>
<dt>width: int (optional, default 800)</dt><dd><p>Width of plot in pixels.</p>
</dd>
<dt>height: int (optional, default 500)</dt><dd><p>Height of plot in pixels.</p>
</dd>
</dl>
<p>Plots IFrame graph of width and height size.
Saves webpage with JS graph visualization to
retention_config.experiments_folder.</p>
<p>Renders IFrame object and saves graph visualization as HTML in
experiments_folder of retention_config.</p>
</dd></dl>

</div>
<div class="section" id="module-retentioneering.core.core_functions.get_clusters">
<span id="get-clusters"></span><h2>get_clusters<a class="headerlink" href="#module-retentioneering.core.core_functions.get_clusters" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="retentioneering.core.core_functions.get_clusters.cluster_event_dist">
<code class="sig-prename descclassname">retentioneering.core.core_functions.get_clusters.</code><code class="sig-name descname">cluster_event_dist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">cl1</span></em>, <em class="sig-param"><span class="n">cl2</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">top_n</span><span class="o">=</span><span class="default_value">8</span></em>, <em class="sig-param"><span class="n">weight_col</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">targets</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/retentioneering/core/core_functions/get_clusters.html#cluster_event_dist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#retentioneering.core.core_functions.get_clusters.cluster_event_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots distribution of top_n events in cluster cl1 compared vs
entire dataset or in cluster cl2.</p>
<dl class="simple">
<dt>cl1: int</dt><dd><p>ID of the cluster to compare.</p>
</dd>
<dt>cl2: int, (optional, default None)</dt><dd><p>ID of the second cluster to compare with top events from first
cluster. If None, then compares with entire dataset.</p>
</dd>
<dt>top_n: int, (optional, default 8)</dt><dd><p>Number of top events.</p>
</dd>
<dt>weight_col: str (optional, default None)</dt><dd><p>If None distribution will be compared based on events occurrences in
datasets. If weight_col is specified, percentages of users
(column name specified by parameter weight_col) who have particular
events will be plotted.</p>
</dd>
<dt>targets: list of str (optional, default [])</dt><dd><p>List of event names always to include for comparison regardless
of the parameter top_n value. Target events will appear in the same
order as specified</p>
</dd>
</dl>
<p>Plots distribution barchart</p>
</dd></dl>

<dl class="py function">
<dt id="retentioneering.core.core_functions.get_clusters.filter_cluster">
<code class="sig-prename descclassname">retentioneering.core.core_functions.get_clusters.</code><code class="sig-name descname">filter_cluster</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">cluster_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/retentioneering/core/core_functions/get_clusters.html#filter_cluster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#retentioneering.core.core_functions.get_clusters.filter_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters dataset against one or several clusters.</p>
<dl class="simple">
<dt>cluster_name: int or list</dt><dd><p>Cluster ID or list of cluster IDs for filtering.</p>
</dd>
</dl>
<p>Filtered dataset as pandas dataframe</p>
<p>pd.Dataframe</p>
</dd></dl>

<dl class="py function">
<dt id="retentioneering.core.core_functions.get_clusters.get_clusters">
<code class="sig-prename descclassname">retentioneering.core.core_functions.get_clusters.</code><code class="sig-name descname">get_clusters</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">feature_type</span><span class="o">=</span><span class="default_value">'tfidf'</span></em>, <em class="sig-param"><span class="n">ngram_range</span><span class="o">=</span><span class="default_value">1, 1</span></em>, <em class="sig-param"><span class="n">n_clusters</span><span class="o">=</span><span class="default_value">8</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'kmeans'</span></em>, <em class="sig-param"><span class="n">plot_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">refit_cluster</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">targets</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/retentioneering/core/core_functions/get_clusters.html#get_clusters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#retentioneering.core.core_functions.get_clusters.get_clusters" title="Permalink to this definition">¶</a></dt>
<dd><p>Cluster users in the dataset according to their behavior.</p>
<dl class="simple">
<dt>feature_type: str (optional, default ‘tfidf’)</dt><dd><p>Type of vectorizer to user to convert sequences of events to numerical vectors.
Currently supports: {‘tfidf’, ‘count’, ‘frequency’, ‘binary’}.</p>
</dd>
<dt>ngram_range: tuple (optional, default (1, 1))</dt><dd><p>The lower and upper boundary of the range of n-values for different
n-grams to be extracted. All values of n such that min_n &lt;= n &lt;= max_n will
be used. For example an ngram_range of (1, 1) means only unigrams, (1, 2)
means unigrams and bigrams, and (2, 2) means only bigrams.</p>
</dd>
<dt>n_clusters: int (optional, default 8)</dt><dd><p>Number of clusters to be identified.</p>
</dd>
<dt>method: str (optional, default ‘kmeans’)</dt><dd><p>Clustering method to use. Currently supports: ‘kmeans’ and ‘gmm’.</p>
</dd>
<dt>plot_type: str (optional, default None)</dt><dd><p>Type of cluster statistics overview graph to plot after clustering.
Currently supports: ‘cluster_bar’</p>
</dd>
<dt>targets: list (optional, default None)</dt><dd><p>List of target events to be
Only applies if plot_type = ‘cluster_bar’</p>
</dd>
<dt>refit_cluster: bool (optional, default True)</dt><dd><p>If False, then cached results of previous clustering are used.
(from .cluster_mapping attribute). If True recalculates clustering.</p>
</dd>
</dl>
<p>Array of clusters as .cluster_mapping attribute</p>
<p>np.array</p>
</dd></dl>

</div>
<div class="section" id="module-retentioneering.core.core_functions.project">
<span id="project"></span><h2>project<a class="headerlink" href="#module-retentioneering.core.core_functions.project" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="retentioneering.core.core_functions.project.project">
<code class="sig-prename descclassname">retentioneering.core.core_functions.project.</code><code class="sig-name descname">project</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'tsne'</span></em>, <em class="sig-param"><span class="n">targets</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">ngram_range</span><span class="o">=</span><span class="default_value">1, 1</span></em>, <em class="sig-param"><span class="n">feature_type</span><span class="o">=</span><span class="default_value">'tfidf'</span></em>, <em class="sig-param"><span class="n">plot_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/retentioneering/core/core_functions/project.html#project"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#retentioneering.core.core_functions.project.project" title="Permalink to this definition">¶</a></dt>
<dd><p>Does dimention reduction of user trajectories and draws projection plane.</p>
<dl>
<dt>method: {‘umap’, ‘tsne’} (optional, default ‘tsne’)</dt><dd><p>Type of manifold transformation.</p>
</dd>
<dt>plot_type: {‘targets’, ‘clusters’, None} (optional, default None)</dt><dd><dl>
<dt>Type of color-coding used for projection visualization:</dt><dd><ul class="simple">
<li><p>‘clusters’: colors trajectories with different colors depending on cluster number.</p></li>
</ul>
<p>IMPORTANT: must do .rete.get_clusters() before to obtain cluster mapping.
- ‘targets’: color trajectories based on reach to any event provided in ‘targets’ parameter.
Must provide ‘targets’ parameter in this case.</p>
</dd>
</dl>
<p>If None, then only calculates TSNE without visualization.</p>
</dd>
<dt>targets: list or tuple of str (optional, default  ())</dt><dd><p>Vector of event_names as str. If user reach any of the specified events, the dot corresponding
to this user will be highlighted as converted on the resulting projection plot</p>
</dd>
<dt>feature_type: str, (optional, default ‘tfidf’)</dt><dd><p>Type of vectorizer to use before dimension-reduction. Available vectorization methods:
{‘tfidf’, ‘count’, ‘binary’, ‘frequency’}</p>
</dd>
<dt>ngram_range: tuple, (optional, default (1,1))</dt><dd><p>The lower and upper boundary of the range of n-values for different
word n-grams or char n-grams to be extracted before dimension-reduction.
For example ngram_range=(1, 1) means only single events, (1, 2) means single events
and bigrams.</p>
</dd>
</dl>
<p>Dataframe with data in the low-dimensional space for user trajectories indexed by user IDs.</p>
<p>pd.DataFrame</p>
</dd></dl>

</div>
<div class="section" id="module-retentioneering.core.core_functions.extract_features">
<span id="extract-features"></span><h2>extract_features<a class="headerlink" href="#module-retentioneering.core.core_functions.extract_features" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="retentioneering.core.core_functions.extract_features.extract_features">
<code class="sig-prename descclassname">retentioneering.core.core_functions.extract_features.</code><code class="sig-name descname">extract_features</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">feature_type</span><span class="o">=</span><span class="default_value">'tfidf'</span></em>, <em class="sig-param"><span class="n">ngram_range</span><span class="o">=</span><span class="default_value">1, 1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/retentioneering/core/core_functions/extract_features.html#extract_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#retentioneering.core.core_functions.extract_features.extract_features" title="Permalink to this definition">¶</a></dt>
<dd><p>User trajectories vectorizer.</p>
<dl class="simple">
<dt>feature_type: str, (optional, default ‘tfidf’)</dt><dd><p>Type of vectorizer. Available vectorization methods:
{‘tfidf’, ‘count’, ‘binary’, ‘frequency’}</p>
</dd>
<dt>ngram_range: tuple, (optional, default (1,1))</dt><dd><p>The lower and upper boundary of the range of n-values for different
word n-grams or char n-grams to be extracted. For example
ngram_range=(1, 1) means only single events, (1, 2) means single events
and bigrams.</p>
</dd>
</dl>
<p>Encoded user trajectories</p>
<p>pd.DataFrame of (number of users, number of unique events | event n-grams)</p>
</dd></dl>

</div>
<div class="section" id="module-retentioneering.core.core_functions.compare">
<span id="compare"></span><h2>compare<a class="headerlink" href="#module-retentioneering.core.core_functions.compare" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="retentioneering.core.core_functions.compare.compare">
<code class="sig-prename descclassname">retentioneering.core.core_functions.compare.</code><code class="sig-name descname">compare</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">groups</span></em>, <em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="n">test</span></em>, <em class="sig-param"><span class="n">group_names</span><span class="o">=</span><span class="default_value">'group_1', 'group_2'</span></em>, <em class="sig-param"><span class="n">alpha</span><span class="o">=</span><span class="default_value">0.05</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/retentioneering/core/core_functions/compare.html#compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#retentioneering.core.core_functions.compare.compare" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests selected metric between two groups of users.</p>
<dl>
<dt>groups: tuple (optional, default None)</dt><dd><p>Must contain tuple of two elements (g_1, g_2): where g_1 and g_2 are collections
of user_id`s (list, tuple or set).</p>
</dd>
<dt>function: function(x) -&gt; number</dt><dd><p>Selected metrics. Must contain a function wich takes as an argument dataset for
single user trajectory and returns a single numerical value.</p>
</dd>
<dt>group_names: tuple (optional, default: (‘group_1’, ‘group_2’))</dt><dd><p>Names for selected groups g_1 and g_2.</p>
</dd>
<dt>test: {‘mannwhitneyu’, ‘ttest’, ‘ks_2samp’}</dt><dd><p>Test the null hypothesis that 2 independent samples are drawn from the same
distribution. One-sided tests are used, meaning that distributions are compared
‘less’ or ‘greater’. Rule of thumbs is: for discrete variables (like convertions
or number of purchase) use Mann-Whitney (‘mannwhitneyu’) test or t-test (‘ttest’).</p>
<blockquote>
<div><p>For continious variables (like average_check) use Kolmogorov-Smirnov test (‘ks_2samp’).</p>
</div></blockquote>
</dd>
<dt>alpha: float (optional, default 0.05)</dt><dd><p>Selected level of significance.</p>
</dd>
</dl>
<p>Prints statistical comparison between two groups over selected metric and test</p>
<p>Plots a distribution for selected metrics for two groups</p>
</dd></dl>

</div>
<div class="section" id="module-retentioneering.core.core_functions.funnel">
<span id="funnel"></span><h2>funnel<a class="headerlink" href="#module-retentioneering.core.core_functions.funnel" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="retentioneering.core.core_functions.funnel.funnel">
<code class="sig-prename descclassname">retentioneering.core.core_functions.funnel.</code><code class="sig-name descname">funnel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">targets</span></em>, <em class="sig-param"><span class="n">groups</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">group_names</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/retentioneering/core/core_functions/funnel.html#funnel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#retentioneering.core.core_functions.funnel.funnel" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots simple convertion funnel with stages as specified in targets parameter.</p>
<dl class="simple">
<dt>targets: list of str</dt><dd><p>List of events used as stages for the funnel. Absolute and relative
number of users who reached specified events at least once will be
plotted. Multiple events can be grouped together as individual state
by combining them as sub list.</p>
</dd>
<dt>groups: list of collectibles (optional, default None)</dt><dd><p>List of user_ids collections. Funnel for each user_id collection
will be plotted. If None all users from dataset will be plotted</p>
</dd>
<dt>group_names: list of strings (optional, default None)</dt><dd><dl class="simple">
<dt>Names for specified user groups to place in a legend. If specified</dt><dd><p>len(group_names) must be equal to len(groups).</p>
</dd>
</dl>
</dd>
</dl>
<p>Funnel plot</p>
</dd></dl>

</div>
<div class="section" id="module-retentioneering.core.core_functions.get_edgelist">
<span id="get-edgelist"></span><h2>get_edgelist<a class="headerlink" href="#module-retentioneering.core.core_functions.get_edgelist" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="retentioneering.core.core_functions.get_edgelist.get_edgelist">
<code class="sig-prename descclassname">retentioneering.core.core_functions.get_edgelist.</code><code class="sig-name descname">get_edgelist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">weight_col</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">norm_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">edge_attributes</span><span class="o">=</span><span class="default_value">'edge_weight'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/retentioneering/core/core_functions/get_edgelist.html#get_edgelist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#retentioneering.core.core_functions.get_edgelist.get_edgelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates weighted table of the transitions between events.</p>
<dl>
<dt>weight_col: str (optional, default=None)</dt><dd><p>Aggregation column for transitions weighting. To calculate weights
as number of transion events use None. To calculate number
of unique users passed through given transition ‘user_id’.</p>
<blockquote>
<div><p>For any other aggreagtion, like number of sessions, pass the column name.</p>
</div></blockquote>
</dd>
<dt>norm_type: {None, ‘full’, ‘node’} (optional, default=None)</dt><dd><p>Type of normalization. If None return raw number of transtions
or other selected aggregation column. ‘full’ - normalized over
entire dataset. ‘node’ weight for edge A –&gt; B normalized over
user in A</p>
</dd>
<dt>edge_attributes: str (optional, default ‘edge_weight’)</dt><dd><p>Name for edge_weight columns</p>
</dd>
</dl>
<p>Dataframe with number of rows equal to all transitions with weight
non-zero weight</p>
<p>pd.DataFrame</p>
</dd></dl>

</div>
<div class="section" id="module-retentioneering.core.core_functions.get_adjacency">
<span id="get-adjacency"></span><h2>get_adjacency<a class="headerlink" href="#module-retentioneering.core.core_functions.get_adjacency" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="retentioneering.core.core_functions.get_adjacency.get_adjacency">
<code class="sig-prename descclassname">retentioneering.core.core_functions.get_adjacency.</code><code class="sig-name descname">get_adjacency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">weight_col</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">norm_type</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/retentioneering/core/core_functions/get_adjacency.html#get_adjacency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#retentioneering.core.core_functions.get_adjacency.get_adjacency" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Creates edge graph in the matrix format. Row indeces are event_col values,</dt><dd><p>from which the transition occured, and columns are events, to</p>
</dd>
</dl>
<p>which the transition occured. The values are weights of the edges defined
with weight_col and norm_type parameters.</p>
<dl>
<dt>weight_col: str (optional, default=None)</dt><dd><p>Aggregation column for transitions weighting. To calculate weights
as number of transion events use None. To calculate number
of unique users passed through given transition ‘user_id’.</p>
<blockquote>
<div><p>For any other aggreagtion, like number of sessions, pass the column name.</p>
</div></blockquote>
</dd>
<dt>norm_type: {None, ‘full’, ‘node’} (optional, default=None)</dt><dd><p>Type of normalization. If None return raw number of transtions
or other selected aggregation column. ‘full’ - normalized over
entire dataset. ‘node’ weight for edge A –&gt; B normalized over
user in A</p>
</dd>
</dl>
<p>Dataframe with number of columns and rows equal to unique number of
event_col values.</p>
<p>pd.DataFrame</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="compare.html" class="btn btn-neutral float-left" title="Compare groups" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, &#34;Data Driven Lab&#34; LLC

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
    <br><br><a href="https://www.linkedin.com/in/godsie/">Maxim Godzi</a> and <a href="https://www.linkedin.com/in/anatoly-zaytsev/">Anatoly Zaytsev</a>. More information at <a href="https://retentioneering.com/">Retentioneering.com</a>.


</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-143266385-2', 'auto');
    ga('send', 'pageview');
    </script>

    
    

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #373736;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #373736;
    }
  </style>


</body>
</html>